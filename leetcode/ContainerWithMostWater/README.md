# Container With Most Water

## 1. Original Problem

### English:
Given n non-negative integers `a1, a2, ..., an`, where each represents a point at coordinate `(i, ai)`. n vertical lines are drawn such that the two endpoints of the line i are at `(i, ai)` and `(i, 0)`. Find two lines, which, together with the x-axis, forms a container, such that the container contains the most water.

Note: You may not slant the container and n is at least 2.

### 繁體中文:
給定 n 個非負整數 `a1, a2, ..., an`，每個數代表坐標中的一個點 `(i, ai)`。在坐標內畫 n 條垂直線，垂直線 i 的兩個端點分別為 `(i, ai)` 和 `(i, 0)`。找出其中的兩條線，使得它們與 x 軸共同構成的容器可以容納最多的水。

注意：你不能傾斜容器，且 n 的值至少為 2。

## 2. 問題理解

這個問題本質上是在尋找一對垂直線，使得它們與 x 軸形成的容器能容納最多的水。容器的容量取決於兩個因素：
- 寬度：兩條垂直線之間的距離，即 `|i - j|`
- 高度：由較短的那條線決定，即 `min(ai, aj)`

因此，容器的容量計算公式為：`面積 = min(ai, aj) * |i - j|`

我們需要在所有可能的線對中找出能形成最大面積的組合。

關鍵約束：
- 數組長度 n ≥ 2
- 所有高度為非負整數
- 容器不能傾斜

## 3. 視覺解釋

讓我們通過視覺方式來理解這個問題：

假設輸入為 `[1,8,6,2,5,4,8,3,7]`

```
    |                       
    |   |               |   
    |   |       |       |   
    |   |       |   |   |   
    |   |   |   |   |   |   
|   |   |   |   |   |   |   
|   |   |   |   |   |   |   
|___|___|___|___|___|___|___
 1   8   6   2   5   4   8   3   7  
 0   1   2   3   4   5   6   7   8  (索引)
```

例如，如果我們選擇索引 1 和 8 的線（高度分別為 8 和 7）：
- 寬度 = 8 - 1 = 7
- 高度 = min(8, 7) = 7
- 面積 = 7 × 7 = 49

這是這個輸入中的最大面積。

## 4. 思考過程

### 解題方向 1：暴力法
最直觀的解法是檢查所有可能的線對組合，計算每對能形成的容器面積，然後找出最大值。

```
for i from 0 to n-2:
    for j from i+1 to n-1:
        area = min(height[i], height[j]) * (j - i)
        maxArea = max(maxArea, area)
```

時間複雜度：O(n²)
空間複雜度：O(1)

### 解題方向 2：雙指針法
我們可以使用更高效的雙指針策略。關鍵洞察是：

1. 初始時，設置左指針在數組開始，右指針在數組結束
2. 這給了我們最大寬度但不一定是最大面積
3. 若要獲得更大面積，我們必須增加高度
4. 我們應該移動指向較短線的指針，因為：
    - 當前面積受限於較短的線
    - 若移動較長線的指針，寬度減小而高度不會增加，面積必定減小
    - 只有移動較短線的指針，才有可能找到更高的線來增加面積

時間複雜度：O(n)
空間複雜度：O(1)

### 問題模式識別
這個問題展示了「貪心」和「雙指針」技術的應用。當我們遇到需要在數組中找到兩個元素以優化某個指標（如面積、和、差等）的問題時，雙指針常常是有效的解法。

## 5. 最優解決方案發展

從暴力解法開始理解，然後優化到雙指針方案：

### 暴力解法（用於理解）
暴力解法很直觀：檢查每一對可能的線，計算它們形成的容器面積，然後找出最大值。

### 雙指針解法（最優）
1. 使用左右指針分別指向數組的兩端
2. 計算當前指針形成的容器面積
3. 移動指向較短線的指針（因為這可能會增加容器高度）
4. 重複步驟2-3直到左右指針相遇

讓我通過具體示例說明這個過程：
輸入：`[1,8,6,2,5,4,8,3,7]`

1. 初始狀態：left=0, right=8, 高度=[1,7], 面積=1×8=8
2. 1<7，移動左指針：left=1, right=8, 高度=[8,7], 面積=7×7=49
3. 8>7，移動右指針：left=1, right=7, 高度=[8,3], 面積=3×6=18
4. 8>3，移動右指針：left=1, right=6, 高度=[8,8], 面積=8×5=40
5. 8=8，可移動任一指針（選左）：left=2, right=6, 高度=[6,8], 面積=6×4=24
6. 繼續此過程...

最終我們得到的最大面積是49。

## 7. 複雜度分析

### 時間複雜度
- **O(n)**：我們只需要遍歷數組一次。雙指針從數組的兩端開始，每一步中我們移動一個指針，最多進行 n 次操作。

### 空間複雜度
- **O(1)**：我們只使用了常數級別的額外空間（幾個變量），不會隨著輸入規模增長。

## 8. 優化與改進

雙指針方法已經是這個問題的最優解決方案，時間複雜度不可能進一步優化到低於 O(n)，因為我們至少需要檢查每個元素一次。

比較兩種方法：
- 暴力法：簡單直觀，但效率低 O(n²)
- 雙指針法：需要一些數學直覺來理解為什麼移動較短的線是最優的，但效率高 O(n)

進一步學習方向：
- 類似的雙指針問題：「三數之和」、「接雨水」等
- 貪心算法應用場景
- 更複雜的動態規劃水資源問題

## 9. 測試策略

這個測試涵蓋了多種情況：
- 基本功能測試（官方示例）
- 邊緣情況（最小輸入）
- 模式測試（遞增、遞減、相同高度）
- 性能測試（大規模輸入）

通過這些測試可以驗證算法在各種情況下的正確性和效率。